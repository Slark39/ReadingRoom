{"version":3,"file":"static/js/8427.1df82c5a.chunk.js","mappings":"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","sources":["../node_modules/async/internal/iterator.js","../node_modules/async/internal/breakLoop.js","../node_modules/lodash/_nodeUtil.js","../node_modules/async/internal/slice.js","../node_modules/async/internal/getIterator.js","../node_modules/web3-provider-engine/index.js","../node_modules/lodash/_root.js","../node_modules/async/internal/once.js","../node_modules/async/internal/withoutIndex.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/isFunction.js","../node_modules/web3-provider-engine/util/stoplight.js","../node_modules/async/internal/map.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_getRawTag.js","../node_modules/jsonify/index.js","../node_modules/async/eachOf.js","../node_modules/safe-event-emitter/index.js","../node_modules/web3-provider-engine/subproviders/subprovider.js","../node_modules/lodash/noop.js","../node_modules/async/internal/wrapAsync.js","../node_modules/web3-provider-engine/util/rpc-cache-utils.js","../node_modules/lodash/isObjectLike.js","../node_modules/web3-provider-engine/node_modules/eth-block-tracker/src/polling.js","../node_modules/lodash/isTypedArray.js","../node_modules/async/internal/doLimit.js","../node_modules/async/internal/setImmediate.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_overArg.js","../node_modules/web3-provider-engine/util/random-id.js","../node_modules/web3-provider-engine/subproviders/cache.js","../node_modules/ethereumjs-tx/es5/index.js","../node_modules/json-stable-stringify/index.js","../node_modules/async/asyncify.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/async/internal/onlyOnce.js","../node_modules/web3-provider-engine/subproviders/json-rpc-engine-middleware.js","../node_modules/eth-json-rpc-middleware/cache-utils.js","../node_modules/async/map.js","../node_modules/lodash/_isIndex.js","../node_modules/eth-json-rpc-middleware/block-cache.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/json-stable-stringify/node_modules/isarray/index.js","../node_modules/lodash/isBuffer.js","../node_modules/async/internal/eachOfLimit.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/isArray.js","../node_modules/lodash/isLength.js","../node_modules/lodash/isArguments.js","../node_modules/async/internal/initialParams.js","../node_modules/lodash/isObject.js","../node_modules/async/eachLimit.js","../node_modules/jsonify/lib/parse.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/jsonify/lib/stringify.js","../node_modules/web3-provider-engine/node_modules/eth-block-tracker/src/base.js","../node_modules/lodash/_baseKeys.js","../node_modules/async/eachSeries.js","../node_modules/eth-json-rpc-middleware/node_modules/json-rpc-engine/src/createAsyncMiddleware.js","../node_modules/web3-provider-engine/util/create-payload.js","../node_modules/async/eachOfLimit.js","../node_modules/lodash/keys.js","../node_modules/lodash/_nativeKeys.js","../node_modules/async/internal/doParallel.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = iterator;\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _getIterator = require('./getIterator');\n\nvar _getIterator2 = _interopRequireDefault(_getIterator);\n\nvar _keys = require('lodash/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? { value: coll[i], key: i } : null;\n    };\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done) return null;\n        i++;\n        return { value: item.value, key: i };\n    };\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = (0, _keys2.default)(obj);\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? { value: obj[key], key: key } : null;\n    };\n}\n\nfunction iterator(coll) {\n    if ((0, _isArrayLike2.default)(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = (0, _getIterator2.default)(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nexports.default = {};\nmodule.exports = exports[\"default\"];","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = slice;\nfunction slice(arrayLike, start) {\n    start = start | 0;\n    var newLen = Math.max(arrayLike.length - start, 0);\n    var newArr = Array(newLen);\n    for (var idx = 0; idx < newLen; idx++) {\n        newArr[idx] = arrayLike[start + idx];\n    }\n    return newArr;\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll) {\n    return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n};\n\nvar iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\nmodule.exports = exports['default'];","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst EthBlockTracker = require('eth-block-tracker')\nconst map = require('async/map')\nconst eachSeries = require('async/eachSeries')\nconst Stoplight = require('./util/stoplight.js')\nconst cacheUtils = require('./util/rpc-cache-utils.js')\nconst createPayload = require('./util/create-payload.js')\nconst noop = function(){}\n\nmodule.exports = Web3ProviderEngine\n\n\ninherits(Web3ProviderEngine, EventEmitter)\n\nfunction Web3ProviderEngine(opts) {\n  const self = this\n  EventEmitter.call(self)\n  self.setMaxListeners(30)\n  // parse options\n  opts = opts || {}\n\n  // block polling\n  const directProvider = { sendAsync: self._handleAsync.bind(self) }\n  const blockTrackerProvider = opts.blockTrackerProvider || directProvider\n  self._blockTracker = opts.blockTracker || new EthBlockTracker({\n    provider: blockTrackerProvider,\n    pollingInterval: opts.pollingInterval || 4000,\n    setSkipCacheFlag: true,\n  })\n\n  // set initialization blocker\n  self._ready = new Stoplight()\n\n  // local state\n  self.currentBlock = null\n  self._providers = []\n}\n\n// public\n\nWeb3ProviderEngine.prototype.start = function(cb = noop){\n  const self = this\n\n  // trigger start\n  self._ready.go()\n\n  // on new block, request block body and emit as events\n  self._blockTracker.on('latest', (blockNumber) => {\n    // get block body\n    self._getBlockByNumberWithRetry(blockNumber, (err, block) => {\n      if (err) {\n        this.emit('error', err)\n        return\n      }\n      if (!block) {\n        console.log(block)\n        this.emit('error', new Error(\"Could not find block\"))\n        return\n      }\n      const bufferBlock = toBufferBlock(block)\n      // set current + emit \"block\" event\n      self._setCurrentBlock(bufferBlock)\n      // emit other events\n      self.emit('rawBlock', block)\n      self.emit('latest', block)\n    })\n  })\n\n  // forward other events\n  self._blockTracker.on('sync', self.emit.bind(self, 'sync'))\n  self._blockTracker.on('error', self.emit.bind(self, 'error'))\n\n  // update state\n  self._running = true\n  // signal that we started\n  self.emit('start')\n}\n\nWeb3ProviderEngine.prototype.stop = function(){\n  const self = this\n  // stop block polling by removing event listeners\n  self._blockTracker.removeAllListeners()\n  // update state\n  self._running = false\n  // signal that we stopped\n  self.emit('stop')\n}\n\nWeb3ProviderEngine.prototype.isRunning = function(){\n  const self = this\n  return self._running\n}\n\nWeb3ProviderEngine.prototype.addProvider = function(source, index){\n  const self = this\n  if (typeof index === 'number') {\n    self._providers.splice(index, 0, source)\n  } else {\n    self._providers.push(source)\n  }\n  source.setEngine(this)\n}\n\nWeb3ProviderEngine.prototype.removeProvider = function(source){\n  const self = this\n  const index = self._providers.indexOf(source)\n  if (index < 0) throw new Error('Provider not found.')\n  self._providers.splice(index, 1)\n}\n\nWeb3ProviderEngine.prototype.send = function(payload){\n  throw new Error('Web3ProviderEngine does not support synchronous requests.')\n}\n\nWeb3ProviderEngine.prototype.sendAsync = function(payload, cb){\n  const self = this\n  self._ready.await(function(){\n\n    if (Array.isArray(payload)) {\n      // handle batch\n      map(payload, self._handleAsync.bind(self), cb)\n    } else {\n      // handle single\n      self._handleAsync(payload, cb)\n    }\n\n  })\n}\n\n// private\n\nWeb3ProviderEngine.prototype._getBlockByNumberWithRetry = function(blockNumber, cb) {\n  const self = this\n\n  let retriesRemaining = 5\n\n  attemptRequest()\n  return\n\n  function attemptRequest () {\n    self._getBlockByNumber(blockNumber, afterRequest)\n  }\n\n  function afterRequest (err, block) {\n    // anomalous error occurred\n    if (err) return cb(err)\n    // block not ready yet\n    if (!block) {\n      if (retriesRemaining > 0) {\n        // wait 1s then try again\n        retriesRemaining--\n        setTimeout(function () {\n          attemptRequest()\n        }, 1000)\n        return\n      } else {\n        // give up, return a null block\n        cb(null, null)\n        return\n      }\n    }\n    // otherwise return result\n    cb(null, block)\n    return\n  }\n}\n\n\nWeb3ProviderEngine.prototype._getBlockByNumber = function(blockNumber, cb) {\n  const req = createPayload({ method: 'eth_getBlockByNumber', params: [blockNumber, false], skipCache: true })\n  this._handleAsync(req, (err, res) => {\n    if (err) return cb(err)\n    return cb(null, res.result)\n  })\n}\n\nWeb3ProviderEngine.prototype._handleAsync = function(payload, finished) {\n  var self = this\n  var currentProvider = -1\n  var result = null\n  var error = null\n\n  var stack = []\n\n  next()\n\n  function next(after) {\n    currentProvider += 1\n    stack.unshift(after)\n\n    // Bubbled down as far as we could go, and the request wasn't\n    // handled. Return an error.\n    if (currentProvider >= self._providers.length) {\n      end(new Error('Request for method \"' + payload.method + '\" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'))\n    } else {\n      try {\n        var provider = self._providers[currentProvider]\n        provider.handleRequest(payload, next, end)\n      } catch (e) {\n        end(e)\n      }\n    }\n  }\n\n  function end(_error, _result) {\n    error = _error\n    result = _result\n\n    eachSeries(stack, function(fn, callback) {\n\n      if (fn) {\n        fn(error, result, callback)\n      } else {\n        callback()\n      }\n    }, function() {\n\n      var resultObj = {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      }\n\n      if (error != null) {\n        resultObj.error = {\n          message: error.stack || error.message || error,\n          code: -32000\n        }\n        // respond with both error formats\n        finished(error, resultObj)\n      } else {\n        finished(null, resultObj)\n      }\n    })\n  }\n}\n\n//\n// from remote-data\n//\n\nWeb3ProviderEngine.prototype._setCurrentBlock = function(block){\n  const self = this\n  self.currentBlock = block\n  self.emit('block', block)\n}\n\n// util\n\nfunction toBufferBlock (jsonBlock) {\n  return {\n    number:           ethUtil.toBuffer(jsonBlock.number),\n    hash:             ethUtil.toBuffer(jsonBlock.hash),\n    parentHash:       ethUtil.toBuffer(jsonBlock.parentHash),\n    nonce:            ethUtil.toBuffer(jsonBlock.nonce),\n    mixHash:          ethUtil.toBuffer(jsonBlock.mixHash),\n    sha3Uncles:       ethUtil.toBuffer(jsonBlock.sha3Uncles),\n    logsBloom:        ethUtil.toBuffer(jsonBlock.logsBloom),\n    transactionsRoot: ethUtil.toBuffer(jsonBlock.transactionsRoot),\n    stateRoot:        ethUtil.toBuffer(jsonBlock.stateRoot),\n    receiptsRoot:     ethUtil.toBuffer(jsonBlock.receiptRoot || jsonBlock.receiptsRoot),\n    miner:            ethUtil.toBuffer(jsonBlock.miner),\n    difficulty:       ethUtil.toBuffer(jsonBlock.difficulty),\n    totalDifficulty:  ethUtil.toBuffer(jsonBlock.totalDifficulty),\n    size:             ethUtil.toBuffer(jsonBlock.size),\n    extraData:        ethUtil.toBuffer(jsonBlock.extraData),\n    gasLimit:         ethUtil.toBuffer(jsonBlock.gasLimit),\n    gasUsed:          ethUtil.toBuffer(jsonBlock.gasUsed),\n    timestamp:        ethUtil.toBuffer(jsonBlock.timestamp),\n    transactions:     jsonBlock.transactions,\n  }\n}\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = once;\nfunction once(fn) {\n    return function () {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _withoutIndex;\nfunction _withoutIndex(iteratee) {\n    return function (value, index, callback) {\n        return iteratee(value, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\n\nmodule.exports = Stoplight\n\n\ninherits(Stoplight, EventEmitter)\n\nfunction Stoplight(){\n  const self = this\n  EventEmitter.call(self)\n  self.isLocked = true\n}\n\nStoplight.prototype.go = function(){\n  const self = this\n  self.isLocked = false\n  self.emit('unlock')\n}\n\nStoplight.prototype.stop = function(){\n  const self = this\n  self.isLocked = true\n  self.emit('lock')\n}\n\nStoplight.prototype.await = function(fn){\n  const self = this\n  if (self.isLocked) {\n    self.once('unlock', fn)\n  } else {\n    setTimeout(fn)\n  }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _asyncMap;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    callback = callback || _noop2.default;\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = (0, _wrapAsync2.default)(iteratee);\n\n    eachfn(arr, function (value, _, callback) {\n        var index = counter++;\n        _iteratee(value, function (err, v) {\n            results[index] = v;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\nmodule.exports = exports['default'];","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","'use strict';\n\nexports.parse = require('./lib/parse');\nexports.stringify = require('./lib/stringify');\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n};\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./internal/once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback || _noop2.default);\n    var index = 0,\n        completed = 0,\n        length = coll.length;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nvar eachOfGeneric = (0, _doLimit2.default)(_eachOfLimit2.default, Infinity);\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nmodule.exports = exports['default'];","const util = require('util')\nconst EventEmitter = require('events/')\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n}\n\nmodule.exports = SafeEventEmitter\n\n\nfunction SafeEventEmitter() {\n  EventEmitter.call(this)\n}\n\nutil.inherits(SafeEventEmitter, EventEmitter)\n\nSafeEventEmitter.prototype.emit = function (type) {\n  // copied from https://github.com/Gozala/events/blob/master/events.js\n  // modified lines are commented with \"edited:\"\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    // edited: using safeApply\n    safeApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      // edited: using safeApply\n      safeApply(listeners[i], this, args);\n  }\n\n  return true;\n}\n\nfunction safeApply(handler, context, args) {\n  try {\n    ReflectApply(handler, context, args)\n  } catch (err) {\n    // throw error after timeout so as not to interupt the stack\n    setTimeout(() => {\n      throw err\n    })\n  }\n}\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n","const createPayload = require('../util/create-payload.js')\n\nmodule.exports = SubProvider\n\n// this is the base class for a subprovider -- mostly helpers\n\n\nfunction SubProvider() {\n\n}\n\nSubProvider.prototype.setEngine = function(engine) {\n  const self = this\n  if (self.engine) return\n  self.engine = engine\n  engine.on('block', function(block) {\n    self.currentBlock = block\n  })\n\n  engine.on('start', function () {\n    self.start()\n  })\n\n  engine.on('stop', function () {\n    self.stop()\n  })\n}\n\nSubProvider.prototype.handleRequest = function(payload, next, end) {\n  throw new Error('Subproviders should override `handleRequest`.')\n}\n\nSubProvider.prototype.emitPayload = function(payload, cb){\n  const self = this\n  self.engine.sendAsync(createPayload(payload), cb)\n}\n\n// dummies for overriding\n\nSubProvider.prototype.stop = function () {}\n\nSubProvider.prototype.start = function () {}\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isAsync = undefined;\n\nvar _asyncify = require('../asyncify');\n\nvar _asyncify2 = _interopRequireDefault(_asyncify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar supportsSymbol = typeof Symbol === 'function';\n\nfunction isAsync(fn) {\n    return supportsSymbol && fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction wrapAsync(asyncFn) {\n    return isAsync(asyncFn) ? (0, _asyncify2.default)(asyncFn) : asyncFn;\n}\n\nexports.default = wrapAsync;\nexports.isAsync = isAsync;","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload,\n}\n\nfunction cacheIdentifierForPayload(payload, opts = {}){\n  if (!canCache(payload)) return null\n  const { includeBlockRef } = opts\n  const params = includeBlockRef ? payload.params : paramsWithoutBlockTag(payload)\n  return payload.method + ':' + stringify(params)\n}\n\nfunction canCache(payload){\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null;\n  }\n\n  return payload.params[index];\n}\n\nfunction paramsWithoutBlockTag(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params;\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1);\n  }\n\n  return payload.params.slice(0,index);\n}\n\nfunction blockTagParamIndex(payload){\n  switch(payload.method) {\n    // blockTag is third param\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is second param\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n      return 1\n    // blockTag is first param\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload(payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'eth_blockNumber':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n      return 'never'\n  }\n}\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doLimit;\nfunction doLimit(fn, limit) {\n    return function (iterable, iteratee, callback) {\n        return fn(iterable, limit, iteratee, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasNextTick = exports.hasSetImmediate = undefined;\nexports.fallback = fallback;\nexports.wrap = wrap;\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hasSetImmediate = exports.hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = exports.hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return function (fn /*, ...args*/) {\n        var args = (0, _slice2.default)(arguments, 1);\n        defer(function () {\n            fn.apply(null, args);\n        });\n    };\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexports.default = wrap(_defer);","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","module.exports = createRandomId\n\n\nfunction createRandomId () {\n  // random id\n  return Math.floor(Number.MAX_SAFE_INTEGER * Math.random())\n}","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createBlockCacheMiddleware = require('eth-json-rpc-middleware/block-cache')\n\nclass BlockCacheSubprovider extends ProviderSubprovider {\n  constructor(opts) {\n    super(({ blockTracker }) => createBlockCacheMiddleware(Object.assign({ blockTracker }, opts)))\n  }\n}\n\nmodule.exports = BlockCacheSubprovider\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ethUtil = require('ethereumjs-util');\nvar fees = require('ethereum-common/params.json');\nvar BN = ethUtil.BN;\n\n// secp256k1n/2\nvar N_DIV_2 = new BN('7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0', 16);\n\n/**\n * Creates a new transaction object.\n *\n * @example\n * var rawTx = {\n *   nonce: '00',\n *   gasPrice: '09184e72a000',\n *   gasLimit: '2710',\n *   to: '0000000000000000000000000000000000000000',\n *   value: '00',\n *   data: '7f7465737432000000000000000000000000000000000000000000000000000000600057',\n *   v: '1c',\n *   r: '5e1d3a76fbf824220eafc8c79ad578ad2b67d01b0c2425eb1f1347e8f50882ab',\n *   s: '5bd428537f05f9830e93792f90ea6a3e2d1ee84952dd96edbae9f658f831ab13'\n * };\n * var tx = new Transaction(rawTx);\n *\n * @class\n * @param {Buffer | Array | Object} data a transaction can be initiailized with either a buffer containing the RLP serialized transaction or an array of buffers relating to each of the tx Properties, listed in order below in the exmple.\n *\n * Or lastly an Object containing the Properties of the transaction like in the Usage example.\n *\n * For Object and Arrays each of the elements can either be a Buffer, a hex-prefixed (0x) String , Number, or an object with a toBuffer method such as Bignum\n *\n * @property {Buffer} raw The raw rlp encoded transaction\n * @param {Buffer} data.nonce nonce number\n * @param {Buffer} data.gasLimit transaction gas limit\n * @param {Buffer} data.gasPrice transaction gas price\n * @param {Buffer} data.to to the to address\n * @param {Buffer} data.value the amount of ether sent\n * @param {Buffer} data.data this will contain the data of the message or the init of a contract\n * @param {Buffer} data.v EC signature parameter\n * @param {Buffer} data.r EC signature parameter\n * @param {Buffer} data.s EC recovery ID\n * @param {Number} data.chainId EIP 155 chainId - mainnet: 1, ropsten: 3\n * */\n\nvar Transaction = function () {\n  function Transaction(data) {\n    _classCallCheck(this, Transaction);\n\n    data = data || {};\n    // Define Properties\n    var fields = [{\n      name: 'nonce',\n      length: 32,\n      allowLess: true,\n      default: new Buffer([])\n    }, {\n      name: 'gasPrice',\n      length: 32,\n      allowLess: true,\n      default: new Buffer([])\n    }, {\n      name: 'gasLimit',\n      alias: 'gas',\n      length: 32,\n      allowLess: true,\n      default: new Buffer([])\n    }, {\n      name: 'to',\n      allowZero: true,\n      length: 20,\n      default: new Buffer([])\n    }, {\n      name: 'value',\n      length: 32,\n      allowLess: true,\n      default: new Buffer([])\n    }, {\n      name: 'data',\n      alias: 'input',\n      allowZero: true,\n      default: new Buffer([])\n    }, {\n      name: 'v',\n      allowZero: true,\n      default: new Buffer([0x1c])\n    }, {\n      name: 'r',\n      length: 32,\n      allowZero: true,\n      allowLess: true,\n      default: new Buffer([])\n    }, {\n      name: 's',\n      length: 32,\n      allowZero: true,\n      allowLess: true,\n      default: new Buffer([])\n    }];\n\n    /**\n     * Returns the rlp encoding of the transaction\n     * @method serialize\n     * @return {Buffer}\n     * @memberof Transaction\n     * @name serialize\n     */\n    // attached serialize\n    ethUtil.defineProperties(this, fields, data);\n\n    /**\n     * @property {Buffer} from (read only) sender address of this transaction, mathematically derived from other parameters.\n     * @name from\n     * @memberof Transaction\n     */\n    Object.defineProperty(this, 'from', {\n      enumerable: true,\n      configurable: true,\n      get: this.getSenderAddress.bind(this)\n    });\n\n    // calculate chainId from signature\n    var sigV = ethUtil.bufferToInt(this.v);\n    var chainId = Math.floor((sigV - 35) / 2);\n    if (chainId < 0) chainId = 0;\n\n    // set chainId\n    this._chainId = chainId || data.chainId || 0;\n    this._homestead = true;\n  }\n\n  /**\n   * If the tx's `to` is to the creation address\n   * @return {Boolean}\n   */\n\n\n  Transaction.prototype.toCreationAddress = function toCreationAddress() {\n    return this.to.toString('hex') === '';\n  };\n\n  /**\n   * Computes a sha3-256 hash of the serialized tx\n   * @param {Boolean} [includeSignature=true] whether or not to inculde the signature\n   * @return {Buffer}\n   */\n\n\n  Transaction.prototype.hash = function hash(includeSignature) {\n    if (includeSignature === undefined) includeSignature = true;\n\n    // EIP155 spec:\n    // when computing the hash of a transaction for purposes of signing or recovering,\n    // instead of hashing only the first six elements (ie. nonce, gasprice, startgas, to, value, data),\n    // hash nine elements, with v replaced by CHAIN_ID, r = 0 and s = 0\n\n    var items = void 0;\n    if (includeSignature) {\n      items = this.raw;\n    } else {\n      if (this._chainId > 0) {\n        var raw = this.raw.slice();\n        this.v = this._chainId;\n        this.r = 0;\n        this.s = 0;\n        items = this.raw;\n        this.raw = raw;\n      } else {\n        items = this.raw.slice(0, 6);\n      }\n    }\n\n    // create hash\n    return ethUtil.rlphash(items);\n  };\n\n  /**\n   * returns the public key of the sender\n   * @return {Buffer}\n   */\n\n\n  Transaction.prototype.getChainId = function getChainId() {\n    return this._chainId;\n  };\n\n  /**\n   * returns the sender's address\n   * @return {Buffer}\n   */\n\n\n  Transaction.prototype.getSenderAddress = function getSenderAddress() {\n    if (this._from) {\n      return this._from;\n    }\n    var pubkey = this.getSenderPublicKey();\n    this._from = ethUtil.publicToAddress(pubkey);\n    return this._from;\n  };\n\n  /**\n   * returns the public key of the sender\n   * @return {Buffer}\n   */\n\n\n  Transaction.prototype.getSenderPublicKey = function getSenderPublicKey() {\n    if (!this._senderPubKey || !this._senderPubKey.length) {\n      if (!this.verifySignature()) throw new Error('Invalid Signature');\n    }\n    return this._senderPubKey;\n  };\n\n  /**\n   * Determines if the signature is valid\n   * @return {Boolean}\n   */\n\n\n  Transaction.prototype.verifySignature = function verifySignature() {\n    var msgHash = this.hash(false);\n    // All transaction signatures whose s-value is greater than secp256k1n/2 are considered invalid.\n    if (this._homestead && new BN(this.s).cmp(N_DIV_2) === 1) {\n      return false;\n    }\n\n    try {\n      var v = ethUtil.bufferToInt(this.v);\n      if (this._chainId > 0) {\n        v -= this._chainId * 2 + 8;\n      }\n      this._senderPubKey = ethUtil.ecrecover(msgHash, v, this.r, this.s);\n    } catch (e) {\n      return false;\n    }\n\n    return !!this._senderPubKey;\n  };\n\n  /**\n   * sign a transaction with a given a private key\n   * @param {Buffer} privateKey\n   */\n\n\n  Transaction.prototype.sign = function sign(privateKey) {\n    var msgHash = this.hash(false);\n    var sig = ethUtil.ecsign(msgHash, privateKey);\n    if (this._chainId > 0) {\n      sig.v += this._chainId * 2 + 8;\n    }\n    Object.assign(this, sig);\n  };\n\n  /**\n   * The amount of gas paid for the data in this tx\n   * @return {BN}\n   */\n\n\n  Transaction.prototype.getDataFee = function getDataFee() {\n    var data = this.raw[5];\n    var cost = new BN(0);\n    for (var i = 0; i < data.length; i++) {\n      data[i] === 0 ? cost.iaddn(fees.txDataZeroGas.v) : cost.iaddn(fees.txDataNonZeroGas.v);\n    }\n    return cost;\n  };\n\n  /**\n   * the minimum amount of gas the tx must have (DataFee + TxFee + Creation Fee)\n   * @return {BN}\n   */\n\n\n  Transaction.prototype.getBaseFee = function getBaseFee() {\n    var fee = this.getDataFee().iaddn(fees.txGas.v);\n    if (this._homestead && this.toCreationAddress()) {\n      fee.iaddn(fees.txCreation.v);\n    }\n    return fee;\n  };\n\n  /**\n   * the up front amount that an account must have for this transaction to be valid\n   * @return {BN}\n   */\n\n\n  Transaction.prototype.getUpfrontCost = function getUpfrontCost() {\n    return new BN(this.gasLimit).imul(new BN(this.gasPrice)).iadd(new BN(this.value));\n  };\n\n  /**\n   * validates the signature and checks to see if it has enough gas\n   * @param {Boolean} [stringError=false] whether to return a string with a dscription of why the validation failed or return a Bloolean\n   * @return {Boolean|String}\n   */\n\n\n  Transaction.prototype.validate = function validate(stringError) {\n    var errors = [];\n    if (!this.verifySignature()) {\n      errors.push('Invalid Signature');\n    }\n\n    if (this.getBaseFee().cmp(new BN(this.gasLimit)) > 0) {\n      errors.push(['gas limit is too low. Need at least ' + this.getBaseFee()]);\n    }\n\n    if (stringError === undefined || stringError === false) {\n      return errors.length === 0;\n    } else {\n      return errors.join(' ');\n    }\n  };\n\n  return Transaction;\n}();\n\nmodule.exports = Transaction;","'use strict';\n\n/** @type {typeof JSON.stringify} */\nvar jsonStringify = (typeof JSON !== 'undefined' ? JSON : require('jsonify')).stringify;\n\nvar isArray = require('isarray');\nvar objectKeys = require('object-keys');\nvar callBind = require('call-bind');\nvar callBound = require('call-bound');\n\nvar $join = callBound('Array.prototype.join');\nvar $indexOf = callBound('Array.prototype.indexOf');\nvar $splice = callBound('Array.prototype.splice');\nvar $sort = callBound('Array.prototype.sort');\n\n/** @type {(n: number, char: string) => string} */\nvar strRepeat = function repeat(n, char) {\n\tvar str = '';\n\tfor (var i = 0; i < n; i += 1) {\n\t\tstr += char;\n\t}\n\treturn str;\n};\n\n/** @type {(parent: import('.').Node, key: import('.').Key, value: unknown) => unknown} */\nvar defaultReplacer = function (_parent, _key, value) { return value; };\n\n/** @type {import('.')} */\nmodule.exports = function stableStringify(obj) {\n\t/** @type {Parameters<import('.')>[1]} */\n\tvar opts = arguments.length > 1 ? arguments[1] : void undefined;\n\tvar space = (opts && opts.space) || '';\n\tif (typeof space === 'number') { space = strRepeat(space, ' '); }\n\tvar cycles = !!opts && typeof opts.cycles === 'boolean' && opts.cycles;\n\t/** @type {undefined | typeof defaultReplacer} */\n\tvar replacer = opts && opts.replacer ? callBind(opts.replacer) : defaultReplacer;\n\n\tvar cmpOpt = typeof opts === 'function' ? opts : opts && opts.cmp;\n\t/** @type {undefined | (<T extends import('.').NonArrayNode>(node: T) => (a: Exclude<keyof T, symbol | number>, b: Exclude<keyof T, symbol | number>) => number)} */\n\tvar cmp = cmpOpt && function (node) {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar get = /** @type {NonNullable<typeof cmpOpt>} */ (cmpOpt).length > 2\n\t\t\t&& /** @type {import('.').Getter['get']} */ function get(k) { return node[k]; };\n\t\treturn function (a, b) {\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\treturn /** @type {NonNullable<typeof cmpOpt>} */ (cmpOpt)(\n\t\t\t\t{ key: a, value: node[a] },\n\t\t\t\t{ key: b, value: node[b] },\n\t\t\t\t// @ts-expect-error TS doesn't understand the optimization used here\n\t\t\t\tget ? /** @type {import('.').Getter} */ { __proto__: null, get: get } : void undefined\n\t\t\t);\n\t\t};\n\t};\n\n\t/** @type {import('.').Node[]} */\n\tvar seen = [];\n\treturn (/** @type {(parent: import('.').Node, key: string | number, node: unknown, level: number) => string | undefined} */\n\t\tfunction stringify(parent, key, node, level) {\n\t\t\tvar indent = space ? '\\n' + strRepeat(level, space) : '';\n\t\t\tvar colonSeparator = space ? ': ' : ':';\n\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\tif (node && /** @type {{ toJSON?: unknown }} */ (node).toJSON && typeof /** @type {{ toJSON?: unknown }} */ (node).toJSON === 'function') {\n\t\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t\tnode = /** @type {{ toJSON: Function }} */ (node).toJSON();\n\t\t\t}\n\n\t\t\tnode = replacer(parent, key, node);\n\n\t\t\tif (node === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof node !== 'object' || node === null) {\n\t\t\t\treturn jsonStringify(node);\n\t\t\t}\n\t\t\tif (isArray(node)) {\n\t\t\t\tvar out = [];\n\t\t\t\tfor (var i = 0; i < node.length; i++) {\n\t\t\t\t\tvar item = stringify(node, i, node[i], level + 1) || jsonStringify(null);\n\t\t\t\t\tout[out.length] = indent + space + item;\n\t\t\t\t}\n\t\t\t\treturn '[' + $join(out, ',') + indent + ']';\n\t\t\t}\n\n\t\t\tif ($indexOf(seen, node) !== -1) {\n\t\t\t\tif (cycles) { return jsonStringify('__cycle__'); }\n\t\t\t\tthrow new TypeError('Converting circular structure to JSON');\n\t\t\t} else {\n\t\t\t\tseen[seen.length] = /** @type {import('.').NonArrayNode} */ (node);\n\t\t\t}\n\n\t\t\t/** @type {import('.').Key[]} */\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\tvar keys = $sort(objectKeys(node), cmp && cmp(/** @type {import('.').NonArrayNode} */ (node)));\n\t\t\tvar out = [];\n\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t\tvar value = stringify(/** @type {import('.').Node} */ (node), key, /** @type {import('.').NonArrayNode} */ (node)[key], level + 1);\n\n\t\t\t\tif (!value) { continue; }\n\n\t\t\t\tvar keyValue = jsonStringify(key)\n\t\t\t\t\t+ colonSeparator\n\t\t\t\t\t+ value;\n\n\t\t\t\tout[out.length] = indent + space + keyValue;\n\t\t\t}\n\t\t\t$splice(seen, $indexOf(seen, node), 1);\n\t\t\treturn '{' + $join(out, ',') + indent + '}';\n\t\t}({ '': obj }, '', obj, 0)\n\t);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncify;\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _initialParams = require('./internal/initialParams');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _setImmediate = require('./internal/setImmediate');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    return (0, _initialParams2.default)(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if ((0, _isObject2.default)(result) && typeof result.then === 'function') {\n            result.then(function (value) {\n                invokeCallback(callback, null, value);\n            }, function (err) {\n                invokeCallback(callback, err.message ? err : new Error(err));\n            });\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (e) {\n        (0, _setImmediate2.default)(rethrow, e);\n    }\n}\n\nfunction rethrow(error) {\n    throw error;\n}\nmodule.exports = exports['default'];","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = onlyOnce;\nfunction onlyOnce(fn) {\n    return function () {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","const Subprovider = require('./subprovider.js')\n\n// wraps a json-rpc-engine middleware in a subprovider interface\n\nclass JsonRpcEngineMiddlewareSubprovider extends Subprovider {\n\n  // take a constructorFn to call once we have a reference to the engine\n  constructor (constructorFn) {\n    super()\n    if (!constructorFn) throw new Error('JsonRpcEngineMiddlewareSubprovider - no constructorFn specified')\n    this._constructorFn = constructorFn\n  }\n\n  // this is called once the subprovider has been added to the provider engine\n  setEngine (engine) {\n    if (this.middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice')\n    const blockTracker = engine._blockTracker\n    const middleware = this._constructorFn({ engine, provider: engine, blockTracker })\n    if (!middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware')\n    if (typeof middleware !== 'function') throw new Error('JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function')\n    this.middleware = middleware\n  }\n\n  handleRequest (req, provEngNext, provEngEnd) {\n    const res = { id: req.id }\n    this.middleware(req, res, middlewareNext, middlewareEnd)\n\n    function middlewareNext (handler) {\n      provEngNext((err, result, cb) => {\n        // update response object with result or error\n        if (err) {\n          delete res.result\n          res.error = { message: err.message || err }\n        } else {\n          res.result = result\n        }\n        // call middleware's next handler (even if error)\n        if (handler) {\n          handler(cb)\n        } else {\n          cb()\n        }\n      })\n    }\n\n    function middlewareEnd (err) {\n      if (err) return provEngEnd(err)\n      provEngEnd(null, res.result)\n    }\n  }\n\n}\n\nmodule.exports = JsonRpcEngineMiddlewareSubprovider\n","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload\n}\n\nfunction cacheIdentifierForPayload (payload, skipBlockRef) {\n  const simpleParams = skipBlockRef ? paramsWithoutBlockTag(payload) : payload.params\n  if (canCache(payload)) {\n    return payload.method + ':' + stringify(simpleParams)\n  } else {\n    return null\n  }\n}\n\nfunction canCache (payload) {\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload (payload) {\n  let index = blockTagParamIndex(payload)\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null\n  }\n\n  return payload.params[index]\n}\n\nfunction paramsWithoutBlockTag (payload) {\n  const index = blockTagParamIndex(payload)\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1)\n  }\n\n  return payload.params.slice(0, index)\n}\n\nfunction blockTagParamIndex (payload) {\n  switch (payload.method) {\n    // blockTag is at index 2\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is at index 1\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n      return 1\n    // blockTag is at index 0\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload (payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n    case 'test_permaCache':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n    case 'test_forkCache':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_blockNumber':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'test_blockCache':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n    case 'test_neverCache':\n      return 'never'\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _doParallel = require('./internal/doParallel');\n\nvar _doParallel2 = _interopRequireDefault(_doParallel);\n\nvar _map = require('./internal/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nexports.default = (0, _doParallel2.default)(_map2.default);\nmodule.exports = exports['default'];","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","const cacheUtils = require('./cache-utils.js')\nconst createAsyncMiddleware = require('json-rpc-engine/src/createAsyncMiddleware')\n// `<nil>` comes from https://github.com/ethereum/go-ethereum/issues/16925\nconst emptyValues = [undefined, null, '\\u003cnil\\u003e']\n\nmodule.exports = createBlockCacheMiddleware\n\n\nfunction createBlockCacheMiddleware(opts = {}) {\n  // validate options\n  const { blockTracker } = opts\n  if (!blockTracker) throw new Error('createBlockCacheMiddleware - No BlockTracker specified')\n\n  // create caching strategies\n  const blockCache = new BlockCacheStrategy()\n  const strategies = {\n    perma: blockCache,\n    block: blockCache,\n    fork: blockCache,\n  }\n\n  return createAsyncMiddleware(async (req, res, next) => {\n    // allow cach to be skipped if so specified\n    if (req.skipCache) {\n      return next()\n    }\n    // check type and matching strategy\n    const type = cacheUtils.cacheTypeForPayload(req)\n    const strategy = strategies[type]\n    // If there's no strategy in place, pass it down the chain.\n    if (!strategy) {\n      return next()\n    }\n    // If the strategy can't cache this request, ignore it.\n    if (!strategy.canCacheRequest(req)) {\n      return next()\n    }\n\n    // get block reference (number or keyword)\n    let blockTag = cacheUtils.blockTagForPayload(req)\n    if (!blockTag) blockTag = 'latest'\n\n    // get exact block number\n    let requestedBlockNumber\n    if (blockTag === 'earliest') {\n      // this just exists for symmetry with \"latest\"\n      requestedBlockNumber = '0x00'\n    } else if (blockTag === 'latest') {\n      // fetch latest block number\n      const latestBlockNumber = await blockTracker.getLatestBlock()\n      // clear all cache before latest block\n      blockCache.clearBefore(latestBlockNumber)\n      requestedBlockNumber = latestBlockNumber\n    } else {\n      // We have a hex number\n      requestedBlockNumber = blockTag\n    }\n\n    // end on a hit, continue on a miss\n    const cacheResult = await strategy.get(req, requestedBlockNumber)\n    if (cacheResult === undefined) {\n      // cache miss\n      // wait for other middleware to handle request\n      await next()\n      // add result to cache\n      await strategy.set(req, requestedBlockNumber, res.result)\n    } else {\n      // fill in result from cache\n      res.result = cacheResult\n    }\n  })\n}\n\n\n//\n// Cache Strategies\n//\n\nclass BlockCacheStrategy {\n  \n  constructor () {\n    this.cache = {}\n  }\n\n  getBlockCacheForPayload (payload, blockNumberHex) {\n    const blockNumber = Number.parseInt(blockNumberHex, 16)\n    let blockCache = this.cache[blockNumber]\n    // create new cache if necesary\n    if (!blockCache) {\n      const newCache = {}\n      this.cache[blockNumber] = newCache\n      blockCache = newCache\n    }\n    return blockCache\n  }\n\n  async get (payload, requestedBlockNumber) {\n    // lookup block cache\n    const blockCache = this.getBlockCacheForPayload(payload, requestedBlockNumber)\n    if (!blockCache) return\n    // lookup payload in block cache\n    const identifier = cacheUtils.cacheIdentifierForPayload(payload, true)\n    const cached = blockCache[identifier]\n    // may be undefined\n    return cached\n  }\n\n  async set (payload, requestedBlockNumber, result) {\n    // check if we can cached this result\n    const canCache = this.canCacheResult(payload, result)\n    if (!canCache) return\n    // set the value in the cache\n    const blockCache = this.getBlockCacheForPayload(payload, requestedBlockNumber)\n    const identifier = cacheUtils.cacheIdentifierForPayload(payload, true)\n    blockCache[identifier] = result\n  }\n\n  canCacheRequest (payload) {\n    // check request method\n    if (!cacheUtils.canCache(payload)) {\n      return false\n    }\n    // check blockTag\n    const blockTag = cacheUtils.blockTagForPayload(payload)\n    if (blockTag === 'pending') {\n      return false\n    }\n    // can be cached\n    return true\n  }\n\n  canCacheResult (payload, result) {\n    // never cache empty values (e.g. undefined)\n    if (emptyValues.includes(result)) return\n    // check if transactions have block reference before caching\n    if (['eth_getTransactionByHash', 'eth_getTransactionReceipt'].includes(payload.method)) {\n      if (!result || !result.blockHash || result.blockHash === '0x0000000000000000000000000000000000000000000000000000000000000000') {\n        return false\n      }\n    }\n    // otherwise true\n    return true\n  }\n\n  // removes all block caches with block number lower than `oldBlockHex`\n  clearBefore (oldBlockHex){\n    const self = this\n    const oldBlockNumber = Number.parseInt(oldBlockHex, 16)\n    // clear old caches\n    Object.keys(self.cache)\n      .map(Number)\n      .filter(num => num < oldBlockNumber)\n      .forEach(num => delete self.cache[num])\n  }\n\n}\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _eachOfLimit;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _iterator = require('./iterator');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _onlyOnce = require('./onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _breakLoop = require('./breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _eachOfLimit(limit) {\n    return function (obj, iteratee, callback) {\n        callback = (0, _once2.default)(callback || _noop2.default);\n        if (limit <= 0 || !obj) {\n            return callback(null);\n        }\n        var nextElem = (0, _iterator2.default)(obj);\n        var done = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            } else if (value === _breakLoop2.default || done && running <= 0) {\n                done = true;\n                return callback(null);\n            } else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish() {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, (0, _onlyOnce2.default)(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\nmodule.exports = exports['default'];","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (fn) {\n    return function () /*...args, callback*/{\n        var args = (0, _slice2.default)(arguments);\n        var callback = args.pop();\n        fn.call(this, args, callback);\n    };\n};\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachLimit;\n\nvar _eachOfLimit = require('./internal/eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _withoutIndex = require('./internal/withoutIndex');\n\nvar _withoutIndex2 = _interopRequireDefault(_withoutIndex);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit2.default)(limit)(coll, (0, _withoutIndex2.default)((0, _wrapAsync2.default)(iteratee)), callback);\n}\nmodule.exports = exports['default'];","'use strict';\n\nvar at; // The index of the current character\nvar ch; // The current character\nvar escapee = {\n\t'\"': '\"',\n\t'\\\\': '\\\\',\n\t'/': '/',\n\tb: '\\b',\n\tf: '\\f',\n\tn: '\\n',\n\tr: '\\r',\n\tt: '\\t'\n};\nvar text;\n\n// Call error when something is wrong.\nfunction error(m) {\n\tthrow {\n\t\tname: 'SyntaxError',\n\t\tmessage: m,\n\t\tat: at,\n\t\ttext: text\n\t};\n}\n\nfunction next(c) {\n\t// If a c parameter is provided, verify that it matches the current character.\n\tif (c && c !== ch) {\n\t\terror(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n\t}\n\n\t// Get the next character. When there are no more characters, return the empty string.\n\n\tch = text.charAt(at);\n\tat += 1;\n\treturn ch;\n}\n\nfunction number() {\n\t// Parse a number value.\n\tvar num;\n\tvar str = '';\n\n\tif (ch === '-') {\n\t\tstr = '-';\n\t\tnext('-');\n\t}\n\twhile (ch >= '0' && ch <= '9') {\n\t\tstr += ch;\n\t\tnext();\n\t}\n\tif (ch === '.') {\n\t\tstr += '.';\n\t\twhile (next() && ch >= '0' && ch <= '9') {\n\t\t\tstr += ch;\n\t\t}\n\t}\n\tif (ch === 'e' || ch === 'E') {\n\t\tstr += ch;\n\t\tnext();\n\t\tif (ch === '-' || ch === '+') {\n\t\t\tstr += ch;\n\t\t\tnext();\n\t\t}\n\t\twhile (ch >= '0' && ch <= '9') {\n\t\t\tstr += ch;\n\t\t\tnext();\n\t\t}\n\t}\n\tnum = Number(str);\n\tif (!isFinite(num)) {\n\t\terror('Bad number');\n\t}\n\treturn num;\n}\n\nfunction string() {\n\t// Parse a string value.\n\tvar hex;\n\tvar i;\n\tvar str = '';\n\tvar uffff;\n\n\t// When parsing for string values, we must look for \" and \\ characters.\n\tif (ch === '\"') {\n\t\twhile (next()) {\n\t\t\tif (ch === '\"') {\n\t\t\t\tnext();\n\t\t\t\treturn str;\n\t\t\t} else if (ch === '\\\\') {\n\t\t\t\tnext();\n\t\t\t\tif (ch === 'u') {\n\t\t\t\t\tuffff = 0;\n\t\t\t\t\tfor (i = 0; i < 4; i += 1) {\n\t\t\t\t\t\thex = parseInt(next(), 16);\n\t\t\t\t\t\tif (!isFinite(hex)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuffff = (uffff * 16) + hex;\n\t\t\t\t\t}\n\t\t\t\t\tstr += String.fromCharCode(uffff);\n\t\t\t\t} else if (typeof escapee[ch] === 'string') {\n\t\t\t\t\tstr += escapee[ch];\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr += ch;\n\t\t\t}\n\t\t}\n\t}\n\terror('Bad string');\n}\n\n// Skip whitespace.\nfunction white() {\n\twhile (ch && ch <= ' ') {\n\t\tnext();\n\t}\n}\n\n// true, false, or null.\nfunction word() {\n\tswitch (ch) {\n\t\tcase 't':\n\t\t\tnext('t');\n\t\t\tnext('r');\n\t\t\tnext('u');\n\t\t\tnext('e');\n\t\t\treturn true;\n\t\tcase 'f':\n\t\t\tnext('f');\n\t\t\tnext('a');\n\t\t\tnext('l');\n\t\t\tnext('s');\n\t\t\tnext('e');\n\t\t\treturn false;\n\t\tcase 'n':\n\t\t\tnext('n');\n\t\t\tnext('u');\n\t\t\tnext('l');\n\t\t\tnext('l');\n\t\t\treturn null;\n\t\tdefault:\n\t\t\terror(\"Unexpected '\" + ch + \"'\");\n\t}\n}\n\n// Parse an array value.\nfunction array() {\n\tvar arr = [];\n\n\tif (ch === '[') {\n\t\tnext('[');\n\t\twhite();\n\t\tif (ch === ']') {\n\t\t\tnext(']');\n\t\t\treturn arr; // empty array\n\t\t}\n\t\twhile (ch) {\n\t\t\tarr.push(value()); // eslint-disable-line no-use-before-define\n\t\t\twhite();\n\t\t\tif (ch === ']') {\n\t\t\t\tnext(']');\n\t\t\t\treturn arr;\n\t\t\t}\n\t\t\tnext(',');\n\t\t\twhite();\n\t\t}\n\t}\n\terror('Bad array');\n}\n\n// Parse an object value.\nfunction object() {\n\tvar key;\n\tvar obj = {};\n\n\tif (ch === '{') {\n\t\tnext('{');\n\t\twhite();\n\t\tif (ch === '}') {\n\t\t\tnext('}');\n\t\t\treturn obj; // empty object\n\t\t}\n\t\twhile (ch) {\n\t\t\tkey = string();\n\t\t\twhite();\n\t\t\tnext(':');\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\t\t\terror('Duplicate key \"' + key + '\"');\n\t\t\t}\n\t\t\tobj[key] = value(); // eslint-disable-line no-use-before-define\n\t\t\twhite();\n\t\t\tif (ch === '}') {\n\t\t\t\tnext('}');\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t\tnext(',');\n\t\t\twhite();\n\t\t}\n\t}\n\terror('Bad object');\n}\n\n// Parse a JSON value. It could be an object, an array, a string, a number, or a word.\nfunction value() {\n\twhite();\n\tswitch (ch) {\n\t\tcase '{':\n\t\t\treturn object();\n\t\tcase '[':\n\t\t\treturn array();\n\t\tcase '\"':\n\t\t\treturn string();\n\t\tcase '-':\n\t\t\treturn number();\n\t\tdefault:\n\t\t\treturn ch >= '0' && ch <= '9' ? number() : word();\n\t}\n}\n\n// Return the json_parse function. It will have access to all of the above functions and variables.\nmodule.exports = function (source, reviver) {\n\tvar result;\n\n\ttext = source;\n\tat = 0;\n\tch = ' ';\n\tresult = value();\n\twhite();\n\tif (ch) {\n\t\terror('Syntax error');\n\t}\n\n\t// If there is a reviver function, we recursively walk the new structure,\n\t// passing each name/value pair to the reviver function for possible\n\t// transformation, starting with a temporary root object that holds the result\n\t// in an empty key. If there is not a reviver function, we simply return the\n\t// result.\n\n\treturn typeof reviver === 'function' ? (function walk(holder, key) {\n\t\tvar k;\n\t\tvar v;\n\t\tvar val = holder[key];\n\t\tif (val && typeof val === 'object') {\n\t\t\tfor (k in value) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(val, k)) {\n\t\t\t\t\tv = walk(val, k);\n\t\t\t\t\tif (typeof v === 'undefined') {\n\t\t\t\t\t\tdelete val[k];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tval[k] = v;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn reviver.call(holder, key, val);\n\t}({ '': result }, '')) : result;\n};\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","'use strict';\n\nvar escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\nvar gap;\nvar indent;\nvar meta = { // table of character substitutions\n\t'\\b': '\\\\b',\n\t'\\t': '\\\\t',\n\t'\\n': '\\\\n',\n\t'\\f': '\\\\f',\n\t'\\r': '\\\\r',\n\t'\"': '\\\\\"',\n\t'\\\\': '\\\\\\\\'\n};\nvar rep;\n\nfunction quote(string) {\n\t// If the string contains no control characters, no quote characters, and no\n\t// backslash characters, then we can safely slap some quotes around it.\n\t// Otherwise we must also replace the offending characters with safe escape sequences.\n\n\tescapable.lastIndex = 0;\n\treturn escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n\t\tvar c = meta[a];\n\t\treturn typeof c === 'string' ? c\n\t\t\t: '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n\t}) + '\"' : '\"' + string + '\"';\n}\n\nfunction str(key, holder) {\n\t// Produce a string from holder[key].\n\tvar i; // The loop counter.\n\tvar k; // The member key.\n\tvar v; // The member value.\n\tvar length;\n\tvar mind = gap;\n\tvar partial;\n\tvar value = holder[key];\n\n\t// If the value has a toJSON method, call it to obtain a replacement value.\n\tif (value && typeof value === 'object' && typeof value.toJSON === 'function') {\n\t\tvalue = value.toJSON(key);\n\t}\n\n\t// If we were called with a replacer function, then call the replacer to obtain a replacement value.\n\tif (typeof rep === 'function') {\n\t\tvalue = rep.call(holder, key, value);\n\t}\n\n\t// What happens next depends on the value's type.\n\tswitch (typeof value) {\n\t\tcase 'string':\n\t\t\treturn quote(value);\n\n\t\tcase 'number':\n\t\t\t// JSON numbers must be finite. Encode non-finite numbers as null.\n\t\t\treturn isFinite(value) ? String(value) : 'null';\n\n\t\tcase 'boolean':\n\t\tcase 'null':\n\t\t\t// If the value is a boolean or null, convert it to a string. Note:\n\t\t\t// typeof null does not produce 'null'. The case is included here in\n\t\t\t// the remote chance that this gets fixed someday.\n\t\t\treturn String(value);\n\n\t\tcase 'object':\n\t\t\tif (!value) {\n\t\t\t\treturn 'null';\n\t\t\t}\n\t\t\tgap += indent;\n\t\t\tpartial = [];\n\n\t\t\t// Array.isArray\n\t\t\tif (Object.prototype.toString.apply(value) === '[object Array]') {\n\t\t\t\tlength = value.length;\n\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\tpartial[i] = str(i, value) || 'null';\n\t\t\t\t}\n\n\t\t\t\t// Join all of the elements together, separated with commas, and wrap them in brackets.\n\t\t\t\tv = partial.length === 0 ? '[]' : gap\n\t\t\t\t\t? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n\t\t\t\t\t: '[' + partial.join(',') + ']';\n\t\t\t\tgap = mind;\n\t\t\t\treturn v;\n\t\t\t}\n\n\t\t\t// If the replacer is an array, use it to select the members to be stringified.\n\t\t\tif (rep && typeof rep === 'object') {\n\t\t\t\tlength = rep.length;\n\t\t\t\tfor (i = 0; i < length; i += 1) {\n\t\t\t\t\tk = rep[i];\n\t\t\t\t\tif (typeof k === 'string') {\n\t\t\t\t\t\tv = str(k, value);\n\t\t\t\t\t\tif (v) {\n\t\t\t\t\t\t\tpartial.push(quote(k) + (gap ? ': ' : ':') + v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Otherwise, iterate through all of the keys in the object.\n\t\t\t\tfor (k in value) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(value, k)) {\n\t\t\t\t\t\tv = str(k, value);\n\t\t\t\t\t\tif (v) {\n\t\t\t\t\t\t\tpartial.push(quote(k) + (gap ? ': ' : ':') + v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Join all of the member texts together, separated with commas, and wrap them in braces.\n\n\t\t\tv = partial.length === 0 ? '{}' : gap\n\t\t\t\t? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n\t\t\t\t: '{' + partial.join(',') + '}';\n\t\t\tgap = mind;\n\t\t\treturn v;\n\t\tdefault:\n\t}\n}\n\nmodule.exports = function (value, replacer, space) {\n\tvar i;\n\tgap = '';\n\tindent = '';\n\n\t// If the space parameter is a number, make an indent string containing that many spaces.\n\tif (typeof space === 'number') {\n\t\tfor (i = 0; i < space; i += 1) {\n\t\t\tindent += ' ';\n\t\t}\n\t} else if (typeof space === 'string') {\n\t\t// If the space parameter is a string, it will be used as the indent string.\n\t\tindent = space;\n\t}\n\n\t// If there is a replacer, it must be a function or an array. Otherwise, throw an error.\n\trep = replacer;\n\tif (\n\t\treplacer\n\t\t&& typeof replacer !== 'function'\n\t\t&& (typeof replacer !== 'object' || typeof replacer.length !== 'number')\n\t) {\n\t\tthrow new Error('JSON.stringify');\n\t}\n\n\t// Make a fake root object containing our value under the key of ''.\n\t// Return the result of stringifying the value.\n\treturn str('', { '': value });\n};\n","const EthQuery = require('eth-query')\nconst pify = require('pify')\nconst SafeEventEmitter = require('safe-event-emitter')\n\nconst sec = 1000\n\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue\nconst blockTrackerEvents = ['sync', 'latest']\n\nclass BaseBlockTracker extends SafeEventEmitter {\n\n  //\n  // public\n  //\n\n  constructor (opts = {}) {\n    super()\n    // config\n    this._blockResetDuration = opts.blockResetDuration || 20 * sec\n    // state\n    this._blockResetTimeout\n    this._currentBlock = null\n    this._isRunning = false\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this)\n    this._onRemoveListener = this._onRemoveListener.bind(this)\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this)\n    // listen for handler changes\n    this._setupInternalEvents()\n  }\n\n  isRunning () {\n    return this._isRunning\n  }\n\n  getCurrentBlock () {\n    return this._currentBlock\n  }\n\n  async getLatestBlock () {\n    // return if available\n    if (this._currentBlock) return this._currentBlock\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => this.once('latest', resolve))\n    // return newly set current block\n    return latestBlock\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners (eventName) {\n    // perform default behavior, preserve fn arity\n    if (eventName) {\n      super.removeAllListeners(eventName)\n    } else {\n      super.removeAllListeners()\n    }\n    // re-add internal events\n    this._setupInternalEvents()\n    // trigger stop check just in case\n    this._onRemoveListener()\n  }\n\n  //\n  // to be implemented in subclass\n  //\n\n  _start () {\n    // default behavior is noop\n  }\n\n  _end () {\n    // default behavior is noop\n  }\n\n  //\n  // private\n  //\n\n  _setupInternalEvents () {\n    // first remove listeners for idempotence\n    this.removeListener('newListener', this._onNewListener)\n    this.removeListener('removeListener', this._onRemoveListener)\n    // then add them\n    this.on('newListener', this._onNewListener)\n    this.on('removeListener', this._onRemoveListener)\n  }\n\n  _onNewListener (eventName, handler) {\n    // `newListener` is called *before* the listener is added\n    if (!blockTrackerEvents.includes(eventName)) return\n    this._maybeStart()\n  }\n\n  _onRemoveListener (eventName, handler) {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) return\n    this._maybeEnd()\n  }\n\n  _maybeStart () {\n    if (this._isRunning) return\n    this._isRunning = true\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout()\n    this._start()\n  }\n\n  _maybeEnd () {\n    if (!this._isRunning) return\n    this._isRunning = false\n    this._setupBlockResetTimeout()\n    this._end()\n  }\n\n  _getBlockTrackerEventCount () {\n    return blockTrackerEvents\n      .map(eventName => this.listenerCount(eventName))\n      .reduce(calculateSum)\n  }\n\n  _newPotentialLatest (newBlock) {\n    const currentBlock = this._currentBlock\n    // only update if blok number is higher\n    if (currentBlock && (hexToInt(newBlock) <= hexToInt(currentBlock))) return\n    this._setCurrentBlock(newBlock)\n  }\n\n  _setCurrentBlock (newBlock) {\n    const oldBlock = this._currentBlock\n    this._currentBlock = newBlock\n    this.emit('latest', newBlock)\n    this.emit('sync', { oldBlock, newBlock })\n  }\n\n  _setupBlockResetTimeout () {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout()\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this._blockResetDuration)\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref()\n    }\n  }\n\n  _cancelBlockResetTimeout () {\n    clearTimeout(this._blockResetTimeout)\n  }\n\n  _resetCurrentBlock () {\n    this._currentBlock = null\n  }\n\n}\n\nmodule.exports = BaseBlockTracker\n\nfunction hexToInt(hexInt) {\n  return Number.parseInt(hexInt, 16)\n}\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _eachLimit = require('./eachLimit');\n\nvar _eachLimit2 = _interopRequireDefault(_eachLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nexports.default = (0, _doLimit2.default)(_eachLimit2.default, 1);\nmodule.exports = exports['default'];","/**\n * JsonRpcEngine only accepts callback-based middleware directly.\n * createAsyncMiddleware exists to enable consumers to pass in async middleware\n * functions.\n *\n * Async middleware have no \"end\" function. Instead, they \"end\" if they return\n * without calling \"next\". Rather than passing in explicit return handlers,\n * async middleware can simply await \"next\", and perform operations on the\n * response object when execution resumes.\n *\n * To accomplish this, createAsyncMiddleware passes the async middleware a\n * wrapped \"next\" function. That function calls the internal JsonRpcEngine\n * \"next\" function with a return handler that resolves a promise when called.\n *\n * The return handler will always be called. Its resolution of the promise\n * enables the control flow described above.\n */\n\nmodule.exports = function createAsyncMiddleware (asyncMiddleware) {\n  return (req, res, next, end) => {\n\n    // nextPromise is the key to the implementation\n    // it is resolved by the return handler passed to the\n    // \"next\" function\n    let resolveNextPromise\n    const nextPromise = new Promise((resolve) => {\n      resolveNextPromise = resolve\n    })\n\n    let returnHandlerCallback, nextWasCalled\n\n    const asyncNext = async () => {\n\n      nextWasCalled = true\n\n      next((callback) => { // eslint-disable-line callback-return\n        returnHandlerCallback = callback\n        resolveNextPromise()\n      })\n      await nextPromise\n    }\n\n    asyncMiddleware(req, res, asyncNext)\n      .then(async () => {\n        if (nextWasCalled) {\n          await nextPromise // we must wait until the return handler is called\n          returnHandlerCallback(null)\n        } else {\n          end(null)\n        }\n      })\n      .catch((error) => {\n        if (returnHandlerCallback) {\n          returnHandlerCallback(error)\n        } else {\n          end(error)\n        }\n      })\n  }\n}\n","const getRandomId = require('./random-id.js')\nconst extend = require('xtend')\n\nmodule.exports = createPayload\n\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: getRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachOfLimit;\n\nvar _eachOfLimit2 = require('./internal/eachOfLimit');\n\nvar _eachOfLimit3 = _interopRequireDefault(_eachOfLimit2);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit3.default)(limit)(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\nmodule.exports = exports['default'];","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doParallel;\n\nvar _eachOf = require('../eachOf');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction doParallel(fn) {\n    return function (obj, iteratee, callback) {\n        return fn(_eachOf2.default, obj, (0, _wrapAsync2.default)(iteratee), callback);\n    };\n}\nmodule.exports = exports['default'];"],"names":["Object","defineProperty","exports","value","coll","_isArrayLike2","default","i","len","length","key","createArrayIterator","iterator","_getIterator2","item","next","done","createES2015Iterator","obj","okeys","_keys2","createObjectIterator","_interopRequireDefault","require","__esModule","module","freeGlobal","freeExports","nodeType","freeModule","freeProcess","process","nodeUtil","types","binding","e","arrayLike","start","newLen","Math","max","newArr","Array","idx","iteratorSymbol","Symbol","EventEmitter","inherits","ethUtil","EthBlockTracker","map","eachSeries","Stoplight","createPayload","Web3ProviderEngine","opts","self","this","call","setMaxListeners","directProvider","sendAsync","_handleAsync","bind","blockTrackerProvider","_blockTracker","blockTracker","provider","pollingInterval","setSkipCacheFlag","_ready","currentBlock","_providers","prototype","go","on","blockNumber","_getBlockByNumberWithRetry","err","block","emit","console","log","Error","bufferBlock","jsonBlock","number","toBuffer","hash","parentHash","nonce","mixHash","sha3Uncles","logsBloom","transactionsRoot","stateRoot","receiptsRoot","receiptRoot","miner","difficulty","totalDifficulty","size","extraData","gasLimit","gasUsed","timestamp","transactions","_setCurrentBlock","_running","stop","removeAllListeners","isRunning","addProvider","source","index","splice","push","setEngine","removeProvider","indexOf","send","payload","cb","await","isArray","retriesRemaining","attemptRequest","_getBlockByNumber","afterRequest","setTimeout","req","method","params","skipCache","res","result","finished","currentProvider","error","stack","end","_error","_result","fn","callback","resultObj","id","jsonrpc","message","code","after","unshift","handleRequest","freeSelf","root","Function","callFn","apply","arguments","iteratee","isFunction","isLength","baseGetTag","isObject","tag","isLocked","once","eachfn","arr","_noop2","results","counter","_iteratee","_wrapAsync2","_","v","n","baseTimes","isArguments","isBuffer","isIndex","isTypedArray","hasOwnProperty","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","objectProto","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","isOwn","unmasked","parse","stringify","eachOfArrayLike","eachOfGeneric","_breakLoop2","_eachOfLimit2","_doLimit2","_once2","_onlyOnce2","completed","iteratorCallback","Infinity","util","R","Reflect","ReflectApply","target","receiver","args","SafeEventEmitter","safeApply","handler","context","type","doError","events","_events","er","listeners","copy","arrayClone","SubProvider","engine","emitPayload","isAsync","_asyncify","_asyncify2","supportsSymbol","asyncFn","canCache","cacheTypeForPayload","paramsWithoutBlockTag","blockTagParamIndex","slice","cacheIdentifierForPayload","includeBlockRef","blockTagForPayload","pify","BaseBlockTracker","timeout","duration","unref","Promise","resolve","timoutRef","constructor","retryTimeout","keepEventLoopActive","super","assign","blockResetDuration","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","checkForLatestBlock","_updateLatestBlock","getLatestBlock","_start","_performSync","catch","_isRunning","newErr","emitErr","latestBlock","_fetchLatestBlock","_newPotentialLatest","baseIsTypedArray","baseUnary","nodeIsTypedArray","limit","iterable","hasNextTick","hasSetImmediate","fallback","wrap","_slice","_slice2","_defer","setImmediate","nextTick","defer","global","func","transform","arg","floor","Number","MAX_SAFE_INTEGER","random","ProviderSubprovider","createBlockCacheMiddleware","_ref","fees","BN","N_DIV_2","Transaction","data","instance","Constructor","TypeError","_classCallCheck","fields","name","allowLess","Buffer","alias","allowZero","defineProperties","enumerable","configurable","get","getSenderAddress","sigV","bufferToInt","chainId","_chainId","_homestead","toCreationAddress","to","includeSignature","items","raw","r","s","rlphash","getChainId","_from","pubkey","getSenderPublicKey","publicToAddress","_senderPubKey","verifySignature","msgHash","cmp","ecrecover","sign","privateKey","sig","ecsign","getDataFee","cost","iaddn","txDataZeroGas","txDataNonZeroGas","getBaseFee","fee","txGas","txCreation","getUpfrontCost","imul","gasPrice","iadd","validate","stringError","errors","join","jsonStringify","JSON","objectKeys","callBind","callBound","$join","$indexOf","$splice","$sort","strRepeat","char","str","defaultReplacer","_parent","_key","space","cycles","replacer","cmpOpt","node","k","a","b","__proto__","seen","parent","level","indent","colonSeparator","toJSON","out","keys","keyValue","_initialParams2","_isObject2","then","invokeCallback","_setImmediate2","rethrow","getRawTag","objectToString","Subprovider","constructorFn","_constructorFn","middleware","provEngNext","provEngEnd","skipBlockRef","simpleParams","_doParallel2","_map2","reIsUint","test","cacheUtils","createAsyncMiddleware","emptyValues","blockCache","BlockCacheStrategy","strategies","perma","fork","async","strategy","canCacheRequest","requestedBlockNumber","blockTag","latestBlockNumber","clearBefore","cacheResult","set","cache","getBlockCacheForPayload","blockNumberHex","parseInt","newCache","canCacheResult","includes","blockHash","oldBlockHex","oldBlockNumber","filter","num","forEach","isObjectLike","typedArrayTags","stubFalse","nextElem","_iterator2","running","looping","iterateeCallback","replenish","elem","Ctor","baseIsArguments","propertyIsEnumerable","pop","_withoutIndex2","at","ch","text","escapee","f","t","m","c","charAt","isFinite","string","hex","uffff","fromCharCode","white","object","array","word","reviver","walk","holder","val","gap","rep","escapable","meta","quote","lastIndex","replace","charCodeAt","partial","mind","calculateSum","accumulator","currentValue","blockTrackerEvents","hexToInt","hexInt","_blockResetDuration","_blockResetTimeout","_currentBlock","_onNewListener","_onRemoveListener","_resetCurrentBlock","_setupInternalEvents","getCurrentBlock","eventName","_end","removeListener","_maybeStart","_getBlockTrackerEventCount","_maybeEnd","_cancelBlockResetTimeout","_setupBlockResetTimeout","listenerCount","reduce","newBlock","oldBlock","clearTimeout","isPrototype","nativeKeys","_eachLimit2","asyncMiddleware","resolveNextPromise","nextPromise","returnHandlerCallback","nextWasCalled","getRandomId","extend","_eachOfLimit3","arrayLikeKeys","baseKeys","isArrayLike","overArg","_eachOf2"],"sourceRoot":""}